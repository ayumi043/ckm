<% content_for :head do %>
 <!--  
 <link href="<%= asset_path 'jquery.vector-map.css'%>" rel="stylesheet" type="text/css" /> -->
  <script src="<%= asset_path 'jquery.vector-map.js' %>" type="text/javascript"></script>
  <script src="<%= asset_path 'china-zh.js' %>" type="text/javascript"></script>
  <script type="text/javascript">
    $(function () {
        // var dataStatus = [{ cha: 'HKG', name: '香港', des: '<br/>无活动点' },
        //                  { cha: 'HAI', name: '海南', des: '<br/>无活动点' },
        //                  { cha: 'YUN', name: '云南', des: '<br/>无活动点' },
        //                  { cha: 'BEJ', name: '北京', des: '<br/>2个活动点' },
        //                  { cha: 'TAJ', name: '天津', des: '<br/>3个活动点' },
        //                  { cha: 'XIN', name: '新疆', des: '<br/>无活动点' },
        //                  { cha: 'TIB', name: '西藏', des: '<br/>无活动点' },
        //                  { cha: 'QIH', name: '青海', des: '<br/>无活动点' },
        //                  { cha: 'GAN', name: '甘肃', des: '<br/>无活动点' },
        //                  { cha: 'NMG', name: '内蒙古', des: '<br/>无活动点' },
        //                  { cha: 'NXA', name: '宁夏', des: '<br/>无活动点' },
        //                  { cha: 'SHX', name: '山西', des: '<br/>无活动点' },
        //                  { cha: 'LIA', name: '辽宁', des: '<br/>无活动点' },
        //                  { cha: 'JIL', name: '吉林', des: '<br/>无活动点' },
        //                  { cha: 'HLJ', name: '黑龙江', des: '<br/>无活动点' },
        //                  { cha: 'HEB', name: '河北', des: '<br/>无活动点' },
        //                  { cha: 'SHD', name: '山东', des: '<br/>无活动点' },
        //                  { cha: 'HEN', name: '河南', des: '<br/>无活动点' },
        //                  { cha: 'SHA', name: '陕西', des: '<br/>无活动点' },
        //                  { cha: 'SCH', name: '四川', des: '<br/>无活动点' },
        //                  { cha: 'CHQ', name: '重庆', des: '<br/>无活动点' },
        //                  { cha: 'HUB', name: '湖北', des: '<br/>1个活动点' },
        //                  { cha: 'ANH', name: '安徽', des: '<br/>无活动点' },
        //                  { cha: 'JSU', name: '江苏', des: '<br/>无活动点' },
        //                  { cha: 'SHH', name: '上海', des: '<br/>1个活动点' },
        //                  { cha: 'ZHJ', name: '浙江', des: '<br/>无活动点' },
        //                  { cha: 'FUJ', name: '福建', des: '<br/>无活动点' },
        //                  { cha: 'TAI', name: '台湾', des: '<br/>无活动点' },
        //                  { cha: 'JXI', name: '江西', des: '<br/>无活动点' },
        //                  { cha: 'HUN', name: '湖南', des: '<br/>无活动点' },
        //                  { cha: 'GUI', name: '贵州', des: '<br/>无活动点' },
        //                  { cha: 'GXI', name: '广西', des: '<br/>无活动点' }, 
        //                  { cha: 'GUD', name: '广东', des: '<br/>无活动点'}];

        var dataStatus = [];
         <% @agents.each do |agent|  %>
            dataStatus.push({ cha: '<%= agent[:cha] %>', name: '<%= agent[:name] %>', 
                              des: '<%= raw agent[:desc] %>' });
         <% end %>


        $('#container').vectorMap({ map: 'china_zh',
            color: "#2286b4", //地图颜色
            onLabelShow: function (event, label, code) {//动态显示内容
                $.each(dataStatus, function (i, items) {
                    if (code == items.cha) {
                        label.html( "<div style='padding:8px;min-width:120px;'><span style='color:#f60'>" + items.name + "</span>" + "<br>" + items.des
                             +"</div>"
                        );
                    }
                });
            },
            onRegionClick: function(){
                window.location = ""
            }
        })

        $('#container').vectorMap('set', 'colors', {FUJ: "#00FF00"});
        $('#container').vectorMap('set', 'colors', {QIH: "#fff"});
        $('#container').vectorMap('set', 'colors', {NMG: "#4a9fc5"});
        $('#container').vectorMap('set', 'colors', {JIL: "#fff"});
        $('#container').vectorMap('set', 'colors', {GUI: "#4a9fc5"});

        $.each(dataStatus, function (i, items) {
            if (items.des.indexOf('个') != -1) {//动态设定颜色，此处用了自定义简单的判断
                var josnStr = "{" + items.cha + ":'#00FF00'}";
                $('#container').vectorMap('set', 'colors', eval('(' + josnStr + ')'));
            }
        });
        $('.jvectormap-zoomin').click(); //放大


        $("#container").animate({"margin-left":"0px"}, "slow", "easeOutBounce");

    });
  </script>
<% end %>

<div class="map">
    <div id="container"></div>
</div>

<div class="content">
    <div class="le">
        <div class="title">
            <span class="hh"><a href="">招商政策</a></span>
            <span class="more"><a href=""> >>更多</a></span>
        </div>
        <div class="box">
            <div class="focus">
                <img src="<%= asset_path 'focus.png' %>" />
            </div>
            <div class="txtz">
                <ul>
                    <li><a href="#">车快美汽车服务有限公司</a></li>
                    <li><a href="#">车快美汽车服务有限公司</a></li>
                    <li><a href="#">车快美汽车服务有限公司</a></li>
                    <li><a href="#">车快美汽车服务有限公司</a></li>
                    <li><a href="#">车快美汽车服务有限公司</a></li>
                    <li><a href="#">车快美汽车服务有限公司</a></li>
                    <li><a href="#">车快美汽车服务有限公司</a></li>
                </ul>
            </div>
        </div>

        <div class="title" id="pro">
            <span class="hh"><a href="">服务项目</a></span>
            <span class="more"><a href=""> >>更多</a></span>
        </div>
        <div class="box">

            <div class="sm">
                国内首家具备德国汽车表面护理最新技术和原材料、独特工艺和完善服务体系的高新技术企业。公司致力于引进国际汽车后服务同行的领先技术和原材料，研究和推广最新产品和工艺，并协同全国代理商，为国内广大汽车快修和养护机构提供先进、独特的技术、产品、工艺和项目。
            </div>
           
            
        </div>

    </div>
</div>
