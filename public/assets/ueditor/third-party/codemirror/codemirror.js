var CodeMirror=function(){function e(r,d){function C(e){return e>=0&&Jn.size>e}function b(e){return m(Jn,e)}function x(e,t){li=!0;for(var n=t-e.height,i=e;i;i=i.parent)i.height+=n}function w(e){var t={line:0,ch:0};at(t,{line:Jn.size-1,ch:b(Jn.size-1).text.length},K(e),t,t),ni=!0}function H(){var e=[];return Jn.iter(0,Jn.size,function(t){e.push(t.text)}),e.join("\n")}function P(e){function t(e){var n=gn(e,!0);if(n&&!T(n,a)){Xn||ot(),a=n,Ut(i,n),ni=!1;var o=At();(n.line>=o.to||n.line<o.from)&&(r=setTimeout(wn(function(){t(e)}),150))}}Tt(e.shiftKey);for(var n=y(e);n!=kn;n=n.parentNode)if(n.parentNode==Rn&&n!=Mn)return;for(var n=y(e);n!=kn;n=n.parentNode)if(n.parentNode==Pn)return Sn.onGutterClick&&Sn.onGutterClick(yi,I(Pn.childNodes,n)+pi,e),v(e);var i=gn(e);switch(D(e)){case 3:return W&&!M&&Cn(e),void 0;case 2:return i&&Lt(i.line,i.ch,!0),void 0}if(!i)return y(e)==In&&v(e),void 0;Xn||ot();var o=+new Date;if(ei&&ei.time>o-400&&T(ei.pos,i))return v(e),setTimeout(bt,20),qt(i.line);if(Zn&&Zn.time>o-400&&T(Zn.pos,i))return ei={time:o,pos:i},v(e),$t(i);Zn={time:o,pos:i};var r,a=i;if(z&&!T(mi.from,mi.to)&&!U(i,mi.from)&&!U(mi.to,i)){V&&(On.draggable=!0);var s=A(Un,"mouseup",wn(function(t){V&&(On.draggable=!1),ti=!1,s(),10>Math.abs(e.clientX-t.clientX)+Math.abs(e.clientY-t.clientY)&&(v(t),Lt(i.line,i.ch,!0),bt())}),!0);return ti=!0,void 0}v(e),Lt(i.line,i.ch,!0);var l=A(Un,"mousemove",wn(function(e){clearTimeout(r),v(e),t(e)}),!0),s=A(Un,"mouseup",wn(function(e){clearTimeout(r);var t=gn(e);t&&Ut(i,t),v(e),bt(),ni=!0,l(),s()}),!0)}function G(e){for(var t=y(e);t!=kn;t=t.parentNode)if(t.parentNode==Pn)return v(e);var n=gn(e);n&&(ei={time:+new Date,pos:n},v(e),$t(n))}function Q(e){function t(e,t){var i=new FileReader;i.onload=function(){r[t]=i.result,++a==o&&(n=Rt(n),wn(function(){var e=ut(r.join(""),n,n);Ut(n,e)})())},i.readAsText(e)}e.preventDefault();var n=gn(e,!0),i=e.dataTransfer.files;if(n&&!Sn.readOnly)if(i&&i.length&&window.FileReader&&window.File)for(var o=i.length,r=Array(o),a=0,s=0;o>s;++s)t(i[s],s);else try{var r=e.dataTransfer.getData("Text");if(r){var l=ut(r,n,n),d=mi.from,c=mi.to;Ut(n,l),ti&&ut("",d,c),bt()}}catch(e){}}function Z(e){var t=pt();_(t),e.dataTransfer.setDragImage(X,0,0),e.dataTransfer.setData("Text",t)}function et(e){var i,o,r=J[e.keyCode],a=q[Sn.keyMap].auto;if(null==r||e.altGraphKey)return a&&(Sn.keyMap=a),null;if(e.altKey&&(r="Alt-"+r),e.ctrlKey&&(r="Ctrl-"+r),e.metaKey&&(r="Cmd-"+r),e.shiftKey&&(i=t("Shift-"+r,Sn.extraKeys,Sn.keyMap))?o=!0:i=t(r,Sn.extraKeys,Sn.keyMap),"string"==typeof i&&(i=$.propertyIsEnumerable(i)?$[i]:null),!a||!i&&n(e)||(Sn.keyMap=a),!i)return!1;if(o){var s=Qn;Qn=null,i(yi),Qn=s}else i(yi);return v(e),!0}function tt(e){Xn||ot();var t=e.keyCode;if(j&&27==t&&(e.returnValue=!1),Tt(16==t||e.shiftKey),!Sn.onKeyEvent||!Sn.onKeyEvent(yi,E(e))){var n=et(e);window.opera&&(Di=n?e.keyCode:null,!n&&(M?e.metaKey:e.ctrlKey)&&88==e.keyCode&&mt(""))}}function nt(e){if(window.opera&&e.keyCode==Di)return Di=null,v(e),void 0;if(!(Sn.onKeyEvent&&Sn.onKeyEvent(yi,E(e))||window.opera&&!e.which&&et(e))){if(Sn.electricChars&&Vn.electricChars){var t=String.fromCharCode(null==e.charCode?e.keyCode:e.charCode);Vn.electricChars.indexOf(t)>-1&&setTimeout(wn(function(){Wt(mi.to.line,"smart")}),75)}Ct()}}function it(e){Sn.onKeyEvent&&Sn.onKeyEvent(yi,E(e))||16==e.keyCode&&(Qn=null)}function ot(){Sn.readOnly||(Xn||(Sn.onFocus&&Sn.onFocus(yi),Xn=!0,-1==kn.className.search(/\bCodeMirror-focused\b/)&&(kn.className+=" CodeMirror-focused"),si||vt(!0)),gt(),En())}function rt(){Xn&&(Sn.onBlur&&Sn.onBlur(yi),Xn=!1,kn.className=kn.className.replace(" CodeMirror-focused","")),clearInterval(jn),setTimeout(function(){Xn||(Qn=null)},150)}function at(e,t,n,i,o){if(bi){var r=[];for(Jn.iter(e.line,t.line+1,function(e){r.push(e.text)}),bi.addChange(e.line,n.length,r);bi.done.length>Sn.undoDepth;)bi.done.shift()}ct(e,t,n,i,o)}function st(e,t){var n=e.pop();if(n){var i=[],o=n.start+n.added;Jn.iter(n.start,o,function(e){i.push(e.text)}),t.push({start:n.start,added:n.old.length,old:i});var r=Rt({line:n.start+n.old.length-1,ch:L(i[i.length-1],n.old[n.old.length-1])});ct({line:n.start,ch:0},{line:o-1,ch:b(o-1).text.length},n.old,r,r),ni=!0}}function lt(){st(bi.done,bi.undone)}function dt(){st(bi.undone,bi.done)}function ct(e,t,n,i,o){function r(e){return Math.min(t.line,t.line+E)>=e?e:e+E}var a=!1,s=Ei.length;Sn.lineWrapping||Jn.iter(e.line,t.line,function(e){return e.text.length==s?(a=!0,!0):void 0}),(e.line!=t.line||n.length>1)&&(li=!0);var d=t.line-e.line,c=b(e.line),u=b(t.line);if(0==e.ch&&0==t.ch&&""==n[n.length-1]){var m=[],h=null;e.line?(h=b(e.line-1),h.fixMarkEnds(u)):u.fixMarkStarts();for(var f=0,p=n.length-1;p>f;++f)m.push(l.inheritMarks(n[f],h));d&&Jn.remove(e.line,d,di),m.length&&Jn.insert(e.line,m)}else if(c==u)if(1==n.length)c.replace(e.ch,t.ch,n[0]);else{u=c.split(t.ch,n[n.length-1]),c.replace(e.ch,null,n[0]),c.fixMarkEnds(u);for(var m=[],f=1,p=n.length-1;p>f;++f)m.push(l.inheritMarks(n[f],c));m.push(u),Jn.insert(e.line+1,m)}else if(1==n.length)c.replace(e.ch,null,n[0]),u.replace(null,t.ch,""),c.append(u),Jn.remove(e.line+1,d,di);else{var m=[];c.replace(e.ch,null,n[0]),u.replace(null,t.ch,n[n.length-1]),c.fixMarkEnds(u);for(var f=1,p=n.length-1;p>f;++f)m.push(l.inheritMarks(n[f],c));d>1&&Jn.remove(e.line+1,d-1,di),Jn.insert(e.line+1,m)}if(Sn.lineWrapping){var g=In.clientWidth/hn()-3;Jn.iter(e.line,e.line+n.length,function(e){if(!e.hidden){var t=Math.ceil(e.text.length/g)||1;t!=e.height&&x(e,t)}})}else Jn.iter(e.line,f+n.length,function(e){var t=e.text;t.length>s&&(Ei=t,s=t.length,ui=null,a=!1)}),a&&(s=0,Ei="",ui=null,Jn.iter(0,Jn.size,function(e){var t=e.text;t.length>s&&(s=t.length,Ei=t)}));for(var C=[],E=n.length-d-1,f=0,v=Gn.length;v>f;++f){var B=Gn[f];e.line>B?C.push(B):B>t.line&&C.push(B+E)}var y=e.line+Math.min(n.length,500);yn(e.line,y),C.push(y),Gn=C,An(100),oi.push({from:e.line,to:t.line+1,diff:E});var D={from:e,to:t,text:n};if(ri){for(var A=ri;A.next;A=A.next);A.next=D}else ri=D;kt(i,o,r(mi.from.line),r(mi.to.line)),Rn.style.height=Jn.height*mn()+2*fn()+"px"}function ut(e,t,n){function i(i){if(U(i,t))return i;if(!U(n,i))return o;var r=i.line+e.length-(n.line-t.line)-1,a=i.ch;return i.line==n.line&&(a+=e[e.length-1].length-(n.ch-(n.line==t.line?t.ch:0))),{line:r,ch:a}}t=Rt(t),n=n?Rt(n):t,e=K(e);var o;return ht(e,t,n,function(e){return o=e,{from:i(mi.from),to:i(mi.to)}}),o}function mt(e,t){ht(K(e),mi.from,mi.to,function(e){return"end"==t?{from:e,to:e}:"start"==t?{from:mi.from,to:mi.from}:{from:mi.from,to:e}})}function ht(e,t,n,i){var o=1==e.length?e[0].length+t.ch:e[e.length-1].length,r=i({line:t.line+e.length-1,ch:o});at(t,n,e,r.from,r.to)}function ft(e,t){var n=e.line,i=t.line;if(n==i)return b(n).text.slice(e.ch,t.ch);var o=[b(n).text.slice(e.ch)];return Jn.iter(n+1,i,function(e){o.push(e.text)}),o.push(b(i).text.slice(0,t.ch)),o.join("\n")}function pt(){return ft(mi.from,mi.to)}function gt(){Ai||Kn.set(Sn.pollInterval,function(){Fn(),Et(),Xn&&gt(),xn()})}function Ct(){function e(){Fn();var n=Et();n||t?(Ai=!1,gt()):(t=!0,Kn.set(60,e)),xn()}var t=!1;Ai=!0,Kn.set(20,e)}function Et(){if(si||!Xn||Y(Ln))return!1;var e=Ln.value;if(e==Fi)return!1;Qn=null;for(var t=0,n=Math.min(Fi.length,e.length);n>t&&Fi[t]==e[t];)++t;return Fi.length>t?mi.from={line:mi.from.line,ch:mi.from.ch-(Fi.length-t)}:hi&&T(mi.from,mi.to)&&(mi.to={line:mi.to.line,ch:Math.min(b(mi.to.line).text.length,mi.to.ch+(e.length-t))}),mt(e.slice(t),"end"),Fi=e,!0}function vt(e){T(mi.from,mi.to)?e&&(Fi=Ln.value=""):(Fi="",Ln.value=pt(),Ln.select())}function bt(){Sn.readOnly||Ln.focus()}function Bt(){if(qn.getBoundingClientRect){var e=qn.getBoundingClientRect();if(!j||e.top!=e.bottom){var t=window.innerHeight||Math.max(document.body.offsetHeight,document.documentElement.offsetHeight);(0>e.top||e.bottom>t)&&qn.scrollIntoView()}}}function yt(){var e=dn(mi.inverted?mi.from:mi.to),t=Sn.lineWrapping?Math.min(e.x,On.offsetWidth):e.x;return Dt(t,e.y,t,e.yBot)}function Dt(e,t,n,i){var o=pn(),r=fn(),a=mn();t+=r,i+=r,e+=o,n+=o;var s=In.clientHeight,l=In.scrollTop,d=!1,c=!0;l>t?(In.scrollTop=Math.max(0,t-2*a),d=!0):i>l+s&&(In.scrollTop=i+a-s,d=!0);var u=In.clientWidth,m=In.scrollLeft,h=Sn.fixedGutter?Hn.clientWidth:0;return m+h>e?(50>e&&(e=0),In.scrollLeft=Math.max(0,e-10-h),d=!0):n>u+m-3&&(In.scrollLeft=n+10-u,d=!0,n>Rn.clientWidth&&(c=!1)),d&&Sn.onScroll&&Sn.onScroll(yi),c}function At(){var e=mn(),t=In.scrollTop-fn(),n=Math.max(0,Math.floor(t/e)),i=Math.ceil((t+In.clientHeight)/e);return{from:f(Jn,n),to:f(Jn,i)}}function Ft(e,t){if(!In.clientWidth)return pi=gi=fi=0,void 0;var n=At();if(!(e!==!0&&0==e.length&&n.from>=pi&&gi>=n.to)){var i=Math.max(n.from-100,0),o=Math.min(Jn.size,n.to+100);i>pi&&20>i-pi&&(i=pi),gi>o&&20>gi-o&&(o=Math.min(Jn.size,gi));for(var r=e===!0?[]:xt([{from:pi,to:gi,domStart:0}],e),a=0,s=0;r.length>s;++s){var l=r[s];i>l.from&&(l.domStart+=i-l.from,l.from=i),l.to>o&&(l.to=o),l.from>=l.to?r.splice(s--,1):a+=l.to-l.from}if(a!=o-i){r.sort(function(e,t){return e.domStart-t.domStart});var d=mn(),c=Hn.style.display;zn.style.display=Hn.style.display="none",wt(i,o,r),zn.style.display="";var u=i!=pi||o!=gi||Ci!=In.clientHeight+d;if(u&&(Ci=In.clientHeight+d),pi=i,gi=o,fi=p(Jn,i),Mn.style.top=fi*d+"px",Rn.style.height=Jn.height*d+2*fn()+"px",zn.childNodes.length!=gi-pi)throw new Error("BAD PATCH! "+JSON.stringify(r)+" size="+(gi-pi)+" nodes="+zn.childNodes.length);if(Sn.lineWrapping){ui=In.clientWidth;var m=zn.firstChild;Jn.iter(pi,gi,function(e){if(!e.hidden){var t=Math.round(m.offsetHeight/d)||1;e.height!=t&&(x(e,t),li=!0)}m=m.nextSibling})}else null==ui&&(ui=sn(Ei)),ui>In.clientWidth?(On.style.width=ui+"px",Rn.style.width="",Rn.style.width=In.scrollWidth+"px"):On.style.width=Rn.style.width="";return Hn.style.display=c,(u||li)&&St(),Nt(),!t&&Sn.onUpdate&&Sn.onUpdate(yi),!0}}}function xt(e,t){for(var n=0,i=t.length||0;i>n;++n){for(var o=t[n],r=[],a=o.diff||0,s=0,l=e.length;l>s;++s){var d=e[s];o.to<=d.from&&o.diff?r.push({from:d.from+a,to:d.to+a,domStart:d.domStart}):o.to<=d.from||o.from>=d.to?r.push(d):(o.from>d.from&&r.push({from:d.from,to:o.from,domStart:d.domStart}),o.to<d.to&&r.push({from:o.to+a,to:d.to+a,domStart:d.domStart+(o.to-d.from)}))}e=r}return e}function wt(e,t,n){function i(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}if(n.length){for(var o=0,r=zn.firstChild,a=0;n.length>a;++a){for(var s=n[a];s.domStart>o;)r=i(r),o++;for(var l=0,d=s.to-s.from;d>l;++l)r=r.nextSibling,o++}for(;r;)r=i(r)}else zn.innerHTML="";var c=n.shift(),r=zn.firstChild,l=e,u=mi.from.line,m=mi.to.line,h=e>u&&m>=e,f=Un.createElement("div");Jn.iter(e,t,function(e){var t=null,i=null;h?(t=0,m==l&&(h=!1,i=mi.to.ch)):u==l&&(m==l?(t=mi.from.ch,i=mi.to.ch):(h=!0,t=mi.from.ch)),c&&c.to==l&&(c=n.shift()),!c||c.from>l?(f.innerHTML=e.hidden?"<pre></pre>":e.getHTML(t,i,!0,vi),zn.insertBefore(f.firstChild,r)):r=r.nextSibling,++l})}function St(){if(Sn.gutter||Sn.lineNumbers){var e=Mn.offsetHeight,t=In.clientHeight;Hn.style.height=(2>e-t?t:e)+"px";var n=[],i=pi;Jn.iter(pi,Math.max(gi,pi+1),function(e){if(e.hidden)n.push("<pre></pre>");else{var t=e.gutterMarker,o=Sn.lineNumbers?i+Sn.firstLineNumber:null;t&&t.text?o=t.text.replace("%N%",null!=o?o:""):null==o&&(o=" "),n.push(t&&t.style?'<pre class="'+t.style+'">':"<pre>",o);for(var r=1;e.height>r;++r)n.push("<br/>&#160;");n.push("</pre>")}++i}),Hn.style.display="none",Pn.innerHTML=n.join("");for(var o=String(Jn.size).length,r=Pn.firstChild,a=N(r),s="";o>a.length+s.length;)s+=" ";s&&r.insertBefore(Un.createTextNode(s),r.firstChild),Hn.style.display="",On.style.marginLeft=Hn.offsetWidth+"px",li=!1}}function Nt(){var e=mi.inverted?mi.from:mi.to;mn();var t=dn(e,!0),n=S(kn),i=S(zn);_n.style.top=t.y+i.top-n.top+"px",_n.style.left=t.x+i.left-n.left+"px",T(mi.from,mi.to)?(qn.style.top=t.y+"px",qn.style.left=(Sn.lineWrapping?Math.min(t.x,On.offsetWidth):t.x)+"px",qn.style.display=""):qn.style.display="none"}function Tt(e){Qn=e?Qn||(mi.inverted?mi.to:mi.from):null}function Ut(e,t){var n=Qn&&Rt(Qn);n&&(U(n,e)?e=n:U(t,n)&&(t=n)),kt(e,t),ii=!0}function kt(e,t,n,i){if(xi=null,null==n&&(n=mi.from.line,i=mi.to.line),!T(mi.from,e)||!T(mi.to,t)){if(U(t,e)){var o=t;t=e,e=o}e.line!=n&&(e=_t(e,n,mi.from.ch)),t.line!=i&&(t=_t(t,i,mi.to.ch)),T(e,t)?mi.inverted=!1:T(e,mi.to)?mi.inverted=!1:T(t,mi.from)&&(mi.inverted=!0),T(e,t)?T(mi.from,mi.to)||oi.push({from:n,to:i+1}):T(mi.from,mi.to)?oi.push({from:e.line,to:t.line+1}):(T(e,mi.from)||(n>e.line?oi.push({from:e.line,to:Math.min(t.line,n)+1}):oi.push({from:n,to:Math.min(i,e.line)+1})),T(t,mi.to)||(i>t.line?oi.push({from:Math.max(n,e.line),to:i+1}):oi.push({from:Math.max(e.line,i),to:t.line+1}))),mi.from=e,mi.to=t,ai=!0}}function _t(e,t,n){function i(t){for(var i=e.line+t,o=1==t?Jn.size:-1;i!=o;){var r=b(i);if(!r.hidden){var a=e.ch;return(a>n||a>r.text.length)&&(a=r.text.length),{line:i,ch:a}}i+=t}}var o=b(e.line);return o.hidden?e.line>=t?i(1)||i(-1):i(-1)||i(1):e}function Lt(e,t,n){var i=Rt({line:e,ch:t||0});(n?Ut:kt)(i,i)}function It(e){return Math.max(0,Math.min(e,Jn.size-1))}function Rt(e){if(0>e.line)return{line:0,ch:0};if(e.line>=Jn.size)return{line:Jn.size-1,ch:b(Jn.size-1).text.length};var t=e.ch,n=b(e.line).text.length;return null==t||t>n?{line:e.line,ch:n}:0>t?{line:e.line,ch:0}:e}function Mt(e,t){function n(){for(var t=r+e,n=0>e?-1:Jn.size;t!=n;t+=e){var i=b(t);if(!i.hidden)return r=t,s=i,!0}}function i(t){if(a==(0>e?0:s.text.length)){if(t||!n())return!1;a=0>e?s.text.length:0}else a+=e;return!0}var o=mi.inverted?mi.from:mi.to,r=o.line,a=o.ch,s=b(r);if("char"==t)i();else if("column"==t)i(!0);else if("word"==t)for(var l=!1;!(0>e)||i();){if(R(s.text.charAt(a)))l=!0;else if(l){0>e&&(e=1,i());break}if(e>0&&!i())break}return{line:r,ch:a}}function Ht(e,t){var n=0>e?mi.from:mi.to;(Qn||T(mi.from,mi.to))&&(n=Mt(e,t)),Lt(n.line,n.ch,!0)}function Pt(e,t){T(mi.from,mi.to)?0>e?ut("",Mt(e,t),mi.to):ut("",mi.from,Mt(e,t)):ut("",mi.from,mi.to),ii=!0}function Ot(e,t){var n=0,i=dn(mi.inverted?mi.from:mi.to,!0);null!=xi&&(i.x=xi),"page"==t?n=In.clientHeight:"line"==t&&(n=mn());var o=cn(i.x,i.y+n*e+2);Lt(o.line,o.ch,!0),xi=i.x}function $t(e){for(var t=b(e.line).text,n=e.ch,i=e.ch;n>0&&R(t.charAt(n-1));)--n;for(;t.length>i&&R(t.charAt(i));)++i;Ut({line:e.line,ch:n},{line:e.line,ch:i})}function qt(e){Ut({line:e,ch:0},{line:e,ch:b(e).text.length})}function zt(e){if(T(mi.from,mi.to))return Wt(mi.from.line,e);for(var t=mi.to.line-(mi.to.ch?0:1),n=mi.from.line;t>=n;++n)Wt(n,e)}function Wt(e,t){if(t||(t="add"),"smart"==t)if(Vn.indent)var n=Bn(e);else t="prev";var i,o=b(e),r=o.indentation(Sn.tabSize),a=o.text.match(/^\s*/)[0];"prev"==t?i=e?b(e-1).indentation(Sn.tabSize):0:"smart"==t?i=Vn.indent(n,o.text.slice(a.length),o.text):"add"==t?i=r+Sn.indentUnit:"subtract"==t&&(i=r-Sn.indentUnit),i=Math.max(0,i);var s=i-r;if(s){var l="",d=0;if(Sn.indentWithTabs)for(var c=Math.floor(i/Sn.tabSize);c;--c)d+=Sn.tabSize,l+="	";for(;i>d;)++d,l+=" "}else{if(mi.from.line!=e&&mi.to.line!=e)return;var l=a}ut(l,{line:e,ch:0},{line:e,ch:a.length})}function jt(){Vn=e.getMode(Sn,Sn.mode),Jn.iter(0,Jn.size,function(e){e.stateAfter=null}),Gn=[0],An()}function Vt(){var e=Sn.gutter||Sn.lineNumbers;Hn.style.display=e?"":"none",e?li=!0:zn.parentNode.style.marginLeft=0}function Gt(){if(Sn.lineWrapping){kn.className+=" CodeMirror-wrap";var e=In.clientWidth/hn()-3;Jn.iter(0,Jn.size,function(t){if(!t.hidden){var n=Math.ceil(t.text.length/e)||1;1!=n&&x(t,n)}}),On.style.width=Rn.style.width=""}else kn.className=kn.className.replace(" CodeMirror-wrap",""),ui=null,Ei="",Jn.iter(0,Jn.size,function(e){1==e.height||e.hidden||x(e,1),e.text.length>Ei.length&&(Ei=e.text)});oi.push({from:0,to:Jn.size})}function Xt(){for(var e='<span class="cm-tab">',t=0;Sn.tabSize>t;++t)e+=" ";return e+"</span>"}function Kt(){vi=Xt(),Ft(!0)}function Yt(){In.className=In.className.replace(/\s*cm-s-\w+/g,"")+Sn.theme.replace(/(^|\s)\s*/g," cm-s-")}function Jt(){this.set=[]}function Qt(e,t,n){function i(e,t,n,i){b(e).addMark(new a(t,n,i,o.set))}e=Rt(e),t=Rt(t);var o=new Jt;if(e.line==t.line)i(e.line,e.ch,t.ch,n);else{i(e.line,e.ch,null,n);for(var r=e.line+1,s=t.line;s>r;++r)i(r,null,null,n);i(t.line,null,t.ch,n)}return oi.push({from:e.line,to:t.line+1}),o}function Zt(e){e=Rt(e);var t=new s(e.ch);return b(e.line).addMark(t),t}function en(e,t,n){return"number"==typeof e&&(e=b(It(e))),e.gutterMarker={text:t,style:n},li=!0,e}function tn(e){"number"==typeof e&&(e=b(It(e))),e.gutterMarker=null,li=!0}function nn(e,t){var n=e,i=e;return"number"==typeof e?i=b(It(e)):n=h(e),null==n?null:t(i,n)?(oi.push({from:n,to:n+1}),i):null}function on(e,t){return nn(e,function(e){return e.className!=t?(e.className=t,!0):void 0})}function rn(e,t){return nn(e,function(e,n){return e.hidden!=t?(e.hidden=t,x(e,t?0:1),!t||mi.from.line!=n&&mi.to.line!=n||kt(_t(mi.from,mi.from.line,mi.from.ch),_t(mi.to,mi.to.line,mi.to.ch)),li=!0):void 0})}function an(e){if("number"==typeof e){if(!C(e))return null;var t=e;if(e=b(e),!e)return null}else{var t=h(e);if(null==t)return null}var n=e.gutterMarker;return{line:t,handle:e,text:e.text,markerText:n&&n.text,markerClass:n&&n.style,lineClass:e.className}}function sn(e){return $n.innerHTML="<pre><span>x</span></pre>",$n.firstChild.firstChild.firstChild.nodeValue=e,$n.firstChild.firstChild.offsetWidth||10}function ln(e,t){var n="";if(Sn.lineWrapping){var i=e.text.indexOf(" ",t+2);n=_(e.text.slice(t+1,0>i?e.text.length:i+(j?5:0)))}$n.innerHTML="<pre>"+e.getHTML(null,null,!1,vi,t)+'<span id="CodeMirror-temp-'+Ui+'">'+_(e.text.charAt(t)||" ")+"</span>"+n+"</pre>";var o=document.getElementById("CodeMirror-temp-"+Ui),r=o.offsetTop,a=o.offsetLeft;if(j&&t&&0==r&&0==a){var s=document.createElement("span");s.innerHTML="x",o.parentNode.insertBefore(s,o.nextSibling),r=s.offsetTop}return{top:r,left:a}}function dn(e,t){var n,i=mn(),o=i*(p(Jn,e.line)-(t?fi:0));if(0==e.ch)n=0;else{var r=ln(b(e.line),e.ch);n=r.left,Sn.lineWrapping&&(o+=Math.max(0,r.top))}return{x:n,y:o,yBot:o+i}}function cn(e,t){function n(e){var t=ln(s,e);if(d){var n=Math.round(t.top/i);return Math.max(0,t.left+(n-c)*In.clientWidth)}return t.left}0>t&&(t=0);var i=mn(),o=hn(),r=fi+Math.floor(t/i),a=f(Jn,r);if(a>=Jn.size)return{line:Jn.size-1,ch:b(Jn.size-1).text.length};var s=b(a),l=s.text,d=Sn.lineWrapping,c=d?r-p(Jn,a):0;if(0>=e&&0==c)return{line:a,ch:0};for(var u,m=0,h=0,g=l.length,C=Math.min(g,Math.ceil((e+.9*c*In.clientWidth)/o));;){var E=n(C);if(!(e>=E&&g>C)){u=E,g=C;break}C=Math.min(g,Math.ceil(1.2*C))}if(e>u)return{line:a,ch:g};for(C=Math.floor(.8*g),E=n(C),e>E&&(m=C,h=E);;){if(1>=g-m)return{line:a,ch:u-e>e-h?m:g};var v=Math.ceil((m+g)/2),B=n(v);B>e?(g=v,u=B):(m=v,h=B)}}function un(e){var t=dn(e,!0),n=S(On);return{x:n.left+t.x,y:n.top+t.y,yBot:n.top+t.yBot}}function mn(){if(null==Ni){Ni="<pre>";for(var e=0;49>e;++e)Ni+="x<br/>";Ni+="x</pre>"}var t=zn.clientHeight;return t==Si?wi:(Si=t,$n.innerHTML=Ni,wi=$n.firstChild.offsetHeight/50||1,$n.innerHTML="",wi)}function hn(){return In.clientWidth==ki?Ti:(ki=In.clientWidth,Ti=sn("x"))}function fn(){return On.offsetTop}function pn(){return On.offsetLeft}function gn(e,t){var n,i,o=S(In,!0);try{n=e.clientX,i=e.clientY}catch(e){return null}if(!t&&(n-o.left>In.clientWidth||i-o.top>In.clientHeight))return null;var r=S(On,!0);return cn(n-r.left,i-r.top)}function Cn(e){function t(){var e=K(Ln.value).join("\n");e!=o&&wn(mt)(e,"end"),_n.style.position="relative",Ln.style.cssText=i,si=!1,vt(!0),gt()}var n=gn(e);if(n&&!window.opera){(T(mi.from,mi.to)||U(n,mi.from)||!U(n,mi.to))&&wn(Lt)(n.line,n.ch);var i=Ln.style.cssText;_n.style.position="absolute",Ln.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(e.clientY-5)+"px; left: "+(e.clientX-5)+"px; z-index: 1000; background: white; "+"border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",si=!0;var o=Ln.value=pt();if(bt(),Ln.select(),W){B(e);var r=A(window,"mouseup",function(){r(),setTimeout(t,20)},!0)}else setTimeout(t,50)}}function En(){clearInterval(jn);var e=!0;qn.style.visibility="",jn=setInterval(function(){qn.style.visibility=(e=!e)?"":"hidden"},650)}function vn(e){function t(e,t,n){if(e.text)for(var i,o=e.styles,r=a?0:e.text.length-1,l=a?0:o.length-2,d=a?o.length:-2;l!=d;l+=2*s){var c=o[l];if(null==o[l+1]||o[l+1]==m){for(var u=a?0:c.length-1,p=a?c.length:-1;u!=p;u+=s,r+=s)if(r>=t&&n>r&&f.test(i=c.charAt(u))){var g=_i[i];if(">"==g.charAt(1)==a)h.push(i);else{if(h.pop()!=g.charAt(0))return{pos:r,match:!1};if(!h.length)return{pos:r,match:!0}}}}else r+=s*c.length}}var n=mi.inverted?mi.from:mi.to,i=b(n.line),o=n.ch-1,r=o>=0&&_i[i.text.charAt(o)]||_i[i.text.charAt(++o)];if(r){for(var a=(r.charAt(0),">"==r.charAt(1)),s=a?1:-1,l=i.styles,d=o+1,c=0,u=l.length;u>c;c+=2)if(0>=(d-=l[c].length)){var m=l[c+1];break}for(var h=[i.text.charAt(o)],f=/[(){}[\]]/,c=n.line,u=a?Math.min(c+100,Jn.size):Math.max(-1,c-100);c!=u;c+=s){var i=b(c),p=c==n.line,g=t(i,p&&a?o+1:0,p&&!a?o:i.text.length);if(g)break}g||(g={pos:null,match:!1});var m=g.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket",C=Qt({line:n.line,ch:o},{line:n.line,ch:o+1},m),E=null!=g.pos&&Qt({line:c,ch:g.pos},{line:c,ch:g.pos+1},m),v=wn(function(){C.clear(),E&&E.clear()});e?setTimeout(v,800):ci=v}}function bn(e){for(var t,n,i=e,o=e-40;i>o;--i){if(0==i)return 0;var r=b(i-1);if(r.stateAfter)return i;var a=r.indentation(Sn.tabSize);(null==n||t>a)&&(n=i-1,t=a)}return n}function Bn(e){var t=bn(e),n=t&&b(t-1).stateAfter;return n=n?i(Vn,n):o(Vn),Jn.iter(t,e,function(e){e.highlight(Vn,n,Sn.tabSize),e.stateAfter=i(Vn,n)}),e>t&&oi.push({from:t,to:e}),Jn.size>e&&!b(e).stateAfter&&Gn.push(e),n}function yn(e,t){var n=Bn(e);Jn.iter(e,t,function(e){e.highlight(Vn,n,Sn.tabSize),e.stateAfter=i(Vn,n)})}function Dn(){for(var e=+new Date+Sn.workTime,t=Gn.length;Gn.length;){if(b(pi).stateAfter)var n=Gn.pop();else var n=pi;if(!(n>=Jn.size)){var r=bn(n),a=r&&b(r-1).stateAfter;a=a?i(Vn,a):o(Vn);var s=0,l=Vn.compareStates,d=!1,c=r,u=!1;if(Jn.iter(c,Jn.size,function(t){var o=t.stateAfter;if(+new Date>e)return Gn.push(c),An(Sn.workDelay),d&&oi.push({from:n,to:c+1}),u=!0;var r=t.highlight(Vn,a,Sn.tabSize);if(r&&(d=!0),t.stateAfter=i(Vn,a),l){if(o&&l(o,a))return!0}else if(r===!1&&o){if(++s>3&&(!Vn.indent||Vn.indent(o,"")==Vn.indent(a,"")))return!0}else s=0;++c}),u)return;d&&oi.push({from:n,to:c+1})}}t&&Sn.onHighlightComplete&&Sn.onHighlightComplete(yi)}function An(e){Gn.length&&Yn.set(e,wn(Dn))}function Fn(){ni=ii=ri=null,oi=[],ai=!1,di=[]}function xn(){var e,t=!1;ai&&(t=!yt()),oi.length?e=Ft(oi,!0):(ai&&Nt(),li&&St()),t&&yt(),ai&&(Bt(),En()),Xn&&!si&&(ni===!0||ni!==!1&&ai)&&vt(ii),ai&&Sn.matchBrackets&&setTimeout(wn(function(){ci&&(ci(),ci=null),T(mi.from,mi.to)&&vn(!1)}),20);var n=ri,i=di;ai&&Sn.onCursorActivity&&Sn.onCursorActivity(yi),n&&Sn.onChange&&yi&&Sn.onChange(yi,n);for(var o=0;i.length>o;++o)i[o](yi);e&&Sn.onUpdate&&Sn.onUpdate(yi)}function wn(e){return function(){Li++||Fn();try{var t=e.apply(this,arguments)}finally{--Li||xn()}return t}}var Sn={},Nn=e.defaults;for(var Tn in Nn)Nn.hasOwnProperty(Tn)&&(Sn[Tn]=(d&&d.hasOwnProperty(Tn)?d:Nn)[Tn]);var Un=Sn.document,kn=Un.createElement("div");kn.className="CodeMirror"+(Sn.lineWrapping?" CodeMirror-wrap":""),kn.innerHTML='<div style="overflow: hidden; position: relative; width: 3px; height: 0px;"><textarea style="position: absolute; padding: 0; width: 1px;" wrap="off" autocorrect="off" autocapitalize="off"></textarea></div><div class="CodeMirror-scroll" tabindex="-1"><div style="position: relative"><div style="position: relative"><div class="CodeMirror-gutter"><div class="CodeMirror-gutter-text"></div></div><div class="CodeMirror-lines"><div style="position: relative"><div style="position: absolute; width: 100%; height: 0; overflow: hidden; visibility: hidden"></div><pre class="CodeMirror-cursor">&#160;</pre><div></div></div></div></div></div></div>',r.appendChild?r.appendChild(kn):r(kn);var _n=kn.firstChild,Ln=_n.firstChild,In=kn.lastChild,Rn=In.firstChild,Mn=Rn.firstChild,Hn=Mn.firstChild,Pn=Hn.firstChild,On=Hn.nextSibling.firstChild,$n=On.firstChild,qn=$n.nextSibling,zn=qn.nextSibling;Yt(),/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent)&&(Ln.style.width="0px"),V||(On.draggable=!0),null!=Sn.tabindex&&(Ln.tabIndex=Sn.tabindex),Sn.gutter||Sn.lineNumbers||(Hn.style.display="none");try{sn("x")}catch(Wn){throw Wn.message.match(/runtime/i)&&(Wn=new Error("A CodeMirror inside a P-style element does not work in Internet Explorer. (innerHTML bug)")),Wn}var jn,Vn,Gn,Xn,Kn=new F,Yn=new F,Jn=new u([new c([new l("")])]);jt();var Qn,Zn,ei,ti,ni,ii,oi,ri,ai,si,li,di,ci,ui,mi={from:{line:0,ch:0},to:{line:0,ch:0},inverted:!1},hi=!1,fi=0,pi=0,gi=0,Ci=0,Ei="",vi=Xt();wn(function(){w(Sn.value||""),ni=!1})();var bi=new g;A(In,"mousedown",wn(P)),A(In,"dblclick",wn(G)),A(On,"dragstart",Z),A(On,"selectstart",v),W||A(In,"contextmenu",Cn),A(In,"scroll",function(){Ft([]),Sn.fixedGutter&&(Hn.style.left=In.scrollLeft+"px"),Sn.onScroll&&Sn.onScroll(yi)}),A(window,"resize",function(){Ft(!0)}),A(Ln,"keyup",wn(it)),A(Ln,"input",Ct),A(Ln,"keydown",wn(tt)),A(Ln,"keypress",wn(nt)),A(Ln,"focus",ot),A(Ln,"blur",rt),A(In,"dragenter",B),A(In,"dragover",B),A(In,"drop",wn(Q)),A(In,"paste",function(){bt(),Ct()}),A(Ln,"paste",Ct),A(Ln,"cut",wn(function(){mt("")}));var Bi;try{Bi=Un.activeElement==Ln}catch(Wn){}Bi?setTimeout(ot,20):rt();var yi=kn.CodeMirror={getValue:H,setValue:wn(w),getSelection:pt,replaceSelection:wn(mt),focus:function(){bt(),ot(),Ct()},setOption:function(e,t){var n=Sn[e];Sn[e]=t,"mode"==e||"indentUnit"==e?jt():"readOnly"==e&&t?(rt(),Ln.blur()):"theme"==e?Yt():"lineWrapping"==e&&n!=t?wn(Gt)():"tabSize"==e&&wn(Kt)(),("lineNumbers"==e||"gutter"==e||"firstLineNumber"==e||"theme"==e)&&wn(Vt)()},getOption:function(e){return Sn[e]},undo:wn(lt),redo:wn(dt),indentLine:wn(function(e,t){C(e)&&Wt(e,null==t?"smart":t?"add":"subtract")}),indentSelection:wn(zt),historySize:function(){return{undo:bi.done.length,redo:bi.undone.length}},clearHistory:function(){bi=new g},matchBrackets:wn(function(){vn(!0)}),getTokenAt:wn(function(e){return e=Rt(e),b(e.line).getTokenAt(Vn,Bn(e.line),e.ch)}),getStateAfter:function(e){return e=It(null==e?Jn.size-1:e),Bn(e+1)},cursorCoords:function(e){return null==e&&(e=mi.inverted),un(e?mi.from:mi.to)},charCoords:function(e){return un(Rt(e))},coordsChar:function(e){var t=S(On);return cn(e.x-t.left,e.y-t.top)},markText:wn(Qt),setBookmark:Zt,setMarker:wn(en),clearMarker:wn(tn),setLineClass:wn(on),hideLine:wn(function(e){return rn(e,!0)}),showLine:wn(function(e){return rn(e,!1)}),onDeleteLine:function(e,t){if("number"==typeof e){if(!C(e))return null;e=b(e)}return(e.handlers||(e.handlers=[])).push(t),e},lineInfo:an,addWidget:function(e,t,n,i,o){e=dn(Rt(e));var r=e.yBot,a=e.x;if(t.style.position="absolute",Rn.appendChild(t),"over"==i)r=e.y;else if("near"==i){var s=Math.max(In.offsetHeight,Jn.height*mn()),l=Math.max(Rn.clientWidth,On.clientWidth)-pn();e.yBot+t.offsetHeight>s&&e.y>t.offsetHeight&&(r=e.y-t.offsetHeight),a+t.offsetWidth>l&&(a=l-t.offsetWidth)}t.style.top=r+fn()+"px",t.style.left=t.style.right="","right"==o?(a=Rn.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==o?a=0:"middle"==o&&(a=(Rn.clientWidth-t.offsetWidth)/2),t.style.left=a+pn()+"px"),n&&Dt(a,r,a+t.offsetWidth,r+t.offsetHeight)},lineCount:function(){return Jn.size},clipPos:Rt,getCursor:function(e){return null==e&&(e=mi.inverted),k(e?mi.from:mi.to)},somethingSelected:function(){return!T(mi.from,mi.to)},setCursor:wn(function(e,t,n){null==t&&"number"==typeof e.line?Lt(e.line,e.ch,n):Lt(e,t,n)}),setSelection:wn(function(e,t,n){(n?Ut:kt)(Rt(e),Rt(t||e))}),getLine:function(e){return C(e)?b(e).text:void 0},getLineHandle:function(e){return C(e)?b(e):void 0},setLine:wn(function(e,t){C(e)&&ut(t,{line:e,ch:0},{line:e,ch:b(e).text.length})}),removeLine:wn(function(e){C(e)&&ut("",{line:e,ch:0},Rt({line:e+1,ch:0}))}),replaceRange:wn(ut),getRange:function(e,t){return ft(Rt(e),Rt(t))},execCommand:function(e){return $[e](yi)},moveH:wn(Ht),deleteH:wn(Pt),moveV:wn(Ot),toggleOverwrite:function(){hi=!hi},posFromIndex:function(e){var t,n=0;return Jn.iter(0,Jn.size,function(i){var o=i.text.length+1;return o>e?(t=e,!0):(e-=o,++n,void 0)}),Rt({line:n,ch:t})},indexFromPos:function(e){if(0>e.line||0>e.ch)return 0;var t=e.ch;return Jn.iter(0,e.line,function(e){t+=e.text.length+1}),t},operation:function(e){return wn(e)()},refresh:function(){Ft(!0)},getInputField:function(){return Ln},getWrapperElement:function(){return kn},getScrollerElement:function(){return In},getGutterElement:function(){return Hn}},Di=null,Ai=!1,Fi="",xi=null;Jt.prototype.clear=wn(function(){for(var e=1/0,t=-1/0,n=0,i=this.set.length;i>n;++n){var o=this.set[n],r=o.marked;if(r&&o.parent){var a=h(o);e=Math.min(e,a),t=Math.max(t,a);for(var s=0;r.length>s;++s)r[s].set==this.set&&r.splice(s--,1)}}1/0!=e&&oi.push({from:e,to:t+1})}),Jt.prototype.find=function(){for(var e,t,n=0,i=this.set.length;i>n;++n)for(var o=this.set[n],r=o.marked,a=0;r.length>a;++a){var s=r[a];if(s.set==this.set&&(null!=s.from||null!=s.to)){var l=h(o);null!=l&&(null!=s.from&&(e={line:l,ch:s.from}),null!=s.to&&(t={line:l,ch:s.to}))}}return{from:e,to:t}};var wi,Si,Ni,Ti,Ui=Math.floor(16777215*Math.random()).toString(16),ki=0,_i={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},Li=0;for(var Ii in O)O.propertyIsEnumerable(Ii)&&!yi.propertyIsEnumerable(Ii)&&(yi[Ii]=O[Ii]);return yi}function t(e,t,n){function i(e,t,n){var o=t[e];if(null!=o)return o;if(null==n&&(n=t.fallthrough),null==n)return t.catchall;if("string"==typeof n)return i(e,q[n]);for(var r=0,a=n.length;a>r;++r)if(o=i(e,q[n[r]]),null!=o)return o;return null}return t?i(e,t,n):i(e,q[n])}function n(e){var t=J[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function i(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var n={};for(var i in t){var o=t[i];o instanceof Array&&(o=o.concat([])),n[i]=o}return n}function o(e,t,n){return e.startState?e.startState(t,n):!0}function r(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8}function a(e,t,n,i){this.from=e,this.to=t,this.style=n,this.set=i}function s(e){this.from=e,this.to=e,this.line=null}function l(e,t){this.styles=t||[e,null],this.text=e,this.height=1,this.marked=this.gutterMarker=this.className=this.handlers=null,this.stateAfter=this.parent=this.hidden=null}function d(e,t,n,i){for(var o=0,r=0,a=0;t>r;o+=2){var s=n[o],l=r+s.length;0==a?(l>e&&i.push(s.slice(e-r,Math.min(s.length,t-r)),n[o+1]),l>=e&&(a=1)):1==a&&(l>t?i.push(s.slice(0,t-r),n[o+1]):i.push(s,n[o+1])),r=l}}function c(e){this.lines=e,this.parent=null;for(var t=0,n=e.length,i=0;n>t;++t)e[t].parent=this,i+=e[t].height;this.height=i}function u(e){this.children=e;for(var t=0,n=0,i=0,o=e.length;o>i;++i){var r=e[i];t+=r.chunkSize(),n+=r.height,r.parent=this}this.size=t,this.height=n,this.parent=null}function m(e,t){for(;!e.lines;)for(var n=0;;++n){var i=e.children[n],o=i.chunkSize();if(o>t){e=i;break}t-=o}return e.lines[t]}function h(e){if(null==e.parent)return null;for(var t=e.parent,n=I(t.lines,e),i=t.parent;i;t=i,i=i.parent){var o=0;for(i.children.length;i.children[o]!=t;++o)n+=i.children[o].chunkSize()}return n}function f(e,t){var n=0;e:do{for(var i=0,o=e.children.length;o>i;++i){var r=e.children[i],a=r.height;if(a>t){e=r;continue e}t-=a,n+=r.chunkSize()}return n}while(!e.lines);for(var i=0,o=e.lines.length;o>i;++i){var s=e.lines[i],l=s.height;if(l>t)break;t-=l}return n+i}function p(e,t){var n=0;e:do{for(var i=0,o=e.children.length;o>i;++i){var r=e.children[i],a=r.chunkSize();if(a>t){e=r;continue e}t-=a,n+=r.height}return n}while(!e.lines);for(var i=0;t>i;++i)n+=e.lines[i].height;return n}function g(){this.time=0,this.done=[],this.undone=[]}function C(){B(this)}function E(e){return e.stop||(e.stop=C),e}function v(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function b(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function B(e){v(e),b(e)}function y(e){return e.target||e.srcElement}function D(e){return e.which?e.which:1&e.button?1:2&e.button?3:4&e.button?2:void 0}function A(e,t,n,i){if("function"==typeof e.addEventListener){if(e.addEventListener(t,n,!1),i)return function(){e.removeEventListener(t,n,!1)}}else{var o=function(e){n(e||window.event)};if(e.attachEvent("on"+t,o),i)return function(){e.detachEvent("on"+t,o)}}}function F(){this.id=null}function x(e,t,n){null==t&&(t=e.search(/[^\s\u00a0]/),-1==t&&(t=e.length));for(var i=0,o=0;t>i;++i)"	"==e.charAt(i)?o+=n-o%n:++o;return o}function w(e){return e.currentStyle?e.currentStyle:window.getComputedStyle(e,null)}function S(e,t){for(var n=e.ownerDocument.body,i=0,o=0,r=!1,a=e;a;a=a.offsetParent){var s=a.offsetLeft,l=a.offsetTop;a==n?(i+=Math.abs(s),o+=Math.abs(l)):(i+=s,o+=l),t&&"fixed"==w(a).position&&(r=!0)}for(var d=t&&!r?null:n,a=e.parentNode;a!=d;a=a.parentNode)null!=a.scrollLeft&&(i-=a.scrollLeft,o-=a.scrollTop);
return{left:i,top:o}}function N(e){return e.textContent||e.innerText||e.nodeValue||""}function T(e,t){return e.line==t.line&&e.ch==t.ch}function U(e,t){return e.line<t.line||e.line==t.line&&e.ch<t.ch}function k(e){return{line:e.line,ch:e.ch}}function _(e){return X.textContent=e,X.innerHTML}function L(e,t){if(!t)return e?e.length:0;if(!e)return t.length;for(var n=e.length,i=t.length;n>=0&&i>=0&&e.charAt(n)==t.charAt(i);--n,--i);return i+1}function I(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,i=e.length;i>n;++n)if(e[n]==t)return n;return-1}function R(e){return/\w/.test(e)||e.toUpperCase()!=e.toLowerCase()}e.defaults={value:"",mode:null,theme:"default",indentUnit:2,indentWithTabs:!1,tabSize:4,keyMap:"default",extraKeys:null,electricChars:!0,onKeyEvent:null,lineWrapping:!1,lineNumbers:!1,gutter:!1,fixedGutter:!1,firstLineNumber:1,readOnly:!1,onChange:null,onCursorActivity:null,onGutterClick:null,onHighlightComplete:null,onUpdate:null,onFocus:null,onBlur:null,onScroll:null,matchBrackets:!1,workTime:100,workDelay:200,pollInterval:100,undoDepth:40,tabindex:null,document:window.document};var M=/Mac/.test(navigator.platform);/Win/.test(navigator.platform);var H={},P={};e.defineMode=function(t,n){e.defaults.mode||"null"==t||(e.defaults.mode=t),H[t]=n},e.defineMIME=function(e,t){P[e]=t},e.getMode=function(t,n){if("string"==typeof n&&P.hasOwnProperty(n)&&(n=P[n]),"string"==typeof n)var i=n,o={};else if(null!=n)var i=n.name,o=n;var r=H[i];return r?r(t,o||{}):(window.console&&console.warn("No mode "+i+" found, falling back to plain text."),e.getMode(t,"text/plain"))},e.listModes=function(){var e=[];for(var t in H)H.propertyIsEnumerable(t)&&e.push(t);return e},e.listMIMEs=function(){var e=[];for(var t in P)P.propertyIsEnumerable(t)&&e.push({mime:t,mode:P[t]});return e};var O=e.extensions={};e.defineExtension=function(e,t){O[e]=t};var $=e.commands={selectAll:function(e){e.setSelection({line:0,ch:0},{line:e.lineCount()-1})},killLine:function(e){var t=e.getCursor(!0),n=e.getCursor(!1),i=!T(t,n);i||e.getLine(t.line).length!=t.ch?e.replaceRange("",t,i?n:{line:t.line}):e.replaceRange("",t,{line:t.line+1,ch:0})},deleteLine:function(e){var t=e.getCursor().line;e.replaceRange("",{line:t,ch:0},{line:t})},undo:function(e){e.undo()},redo:function(e){e.redo()},goDocStart:function(e){e.setCursor(0,0,!0)},goDocEnd:function(e){e.setSelection({line:e.lineCount()-1},null,!0)},goLineStart:function(e){e.setCursor(e.getCursor().line,0,!0)},goLineStartSmart:function(e){var t=e.getCursor(),n=e.getLine(t.line),i=Math.max(0,n.search(/\S/));e.setCursor(t.line,i>=t.ch&&t.ch?0:i,!0)},goLineEnd:function(e){e.setSelection({line:e.getCursor().line},null,!0)},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goWordRight:function(e){e.moveH(1,"word")},delCharLeft:function(e){e.deleteH(-1,"char")},delCharRight:function(e){e.deleteH(1,"char")},delWordLeft:function(e){e.deleteH(-1,"word")},delWordRight:function(e){e.deleteH(1,"word")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("	","end")},transposeChars:function(e){var t=e.getCursor(),n=e.getLine(t.line);t.ch>0&&t.ch<n.length-1&&e.replaceRange(n.charAt(t.ch)+n.charAt(t.ch-1),{line:t.line,ch:t.ch-1},{line:t.line,ch:t.ch+1})},newlineAndIndent:function(e){e.replaceSelection("\n","end"),e.indentLine(e.getCursor().line)},toggleOverwrite:function(e){e.toggleOverwrite()}},q=e.keyMap={};q.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharRight",Backspace:"delCharLeft",Tab:"indentMore","Shift-Tab":"indentLess",Enter:"newlineAndIndent",Insert:"toggleOverwrite"},q.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goWordLeft","Ctrl-Right":"goWordRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delWordLeft","Ctrl-Delete":"delWordRight","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll",fallthrough:"basic"},q.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goWordLeft","Alt-Right":"goWordRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delWordLeft","Ctrl-Alt-Backspace":"delWordRight","Alt-Delete":"delWordRight","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll",fallthrough:["basic","emacsy"]},q["default"]=M?q.macDefault:q.pcDefault,q.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageUp","Shift-Ctrl-V":"goPageDown","Ctrl-D":"delCharRight","Ctrl-H":"delCharLeft","Alt-D":"delWordRight","Alt-Backspace":"delWordLeft","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},e.fromTextArea=function(t,n){function i(){t.value=s.getValue()}function o(){i(),t.form.submit=a,t.form.submit(),t.form.submit=o}if(n||(n={}),n.value=t.value,!n.tabindex&&t.tabindex&&(n.tabindex=t.tabindex),t.form){var r=A(t.form,"submit",i,!0);if("function"==typeof t.form.submit){var a=t.form.submit;t.form.submit=o}}t.style.display="none";var s=e(function(e){t.parentNode.insertBefore(e,t.nextSibling)},n);return s.save=i,s.getTextArea=function(){return t},s.toTextArea=function(){i(),t.parentNode.removeChild(s.getWrapperElement()),t.style.display="",t.form&&(r(),"function"==typeof t.form.submit&&(t.form.submit=a))},s},e.copyState=i,e.startState=o,r.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(e){var t=this.string.charAt(this.pos);if("string"==typeof e)var n=t==e;else var n=t&&(e.test?e.test(t):e(t));return n?(++this.pos,t):void 0},eatWhile:function(e){for(var t=this.pos;this.eat(e););return this.pos>t},eatSpace:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);return t>-1?(this.pos=t,!0):void 0},backUp:function(e){this.pos-=e},column:function(){return x(this.string,this.start,this.tabSize)},indentation:function(){return x(this.string,null,this.tabSize)},match:function(e,t,n){function i(e){return n?e.toLowerCase():e}if("string"!=typeof e){var o=this.string.slice(this.pos).match(e);return o&&t!==!1&&(this.pos+=o[0].length),o}return i(this.string).indexOf(i(e),this.pos)==this.pos?(t!==!1&&(this.pos+=e.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)}},e.StringStream=r,a.prototype={attach:function(e){this.set.push(e)},detach:function(e){var t=I(this.set,e);t>-1&&this.set.splice(t,1)},split:function(e,t){if(e>=this.to&&null!=this.to)return null;var n=e>this.from||null==this.from?null:this.from-e+t,i=null==this.to?null:this.to-e+t;return new a(n,i,this.style,this.set)},dup:function(){return new a(null,null,this.style,this.set)},clipTo:function(e,t,n,i,o){null!=this.from&&this.from>=t&&(this.from=Math.max(i,this.from)+o),null!=this.to&&this.to>t&&(this.to=this.to>i?this.to+o:t),e&&i>this.from&&(this.to>i||null==this.to)&&(this.from=null),n&&(this.to>t||null==this.to)&&(t>this.from||null==this.from)&&(this.to=null)},isDead:function(){return null!=this.from&&null!=this.to&&this.from>=this.to},sameSet:function(e){return this.set==e.set}},s.prototype={attach:function(e){this.line=e},detach:function(e){this.line==e&&(this.line=null)},split:function(e,t){return this.from>e?(this.from=this.to=this.from-e+t,this):void 0},isDead:function(){return this.from>this.to},clipTo:function(e,t,n,i,o){(e||this.from>t)&&(n||i>this.to)?(this.from=0,this.to=-1):this.from>t&&(this.from=this.to=Math.max(i,this.from)+o)},sameSet:function(){return!1},find:function(){return this.line&&this.line.parent?{line:h(this.line),ch:this.from}:null},clear:function(){if(this.line){var e=I(this.line.marked,this);-1!=e&&this.line.marked.splice(e,1),this.line=null}}},l.inheritMarks=function(e,t){var n=new l(e),i=t&&t.marked;if(i)for(var o=0;i.length>o;++o)if(null==i[o].to&&i[o].style){var r=n.marked||(n.marked=[]),a=i[o],s=a.dup();r.push(s),s.attach(n)}return n},l.prototype={replace:function(e,t,n){var i=[],o=this.marked,r=null==t?this.text.length:t;if(d(0,e,this.styles,i),n&&i.push(n,null),d(r,this.text.length,this.styles,i),this.styles=i,this.text=this.text.slice(0,e)+n+this.text.slice(r),this.stateAfter=null,o)for(var a=n.length-(r-e),s=0,l=o[s];o.length>s;++s)l.clipTo(null==e,e||0,null==t,r,a),l.isDead()&&(l.detach(this),o.splice(s--,1))},split:function(e,t){var n=[t,null],i=this.marked;d(e,this.text.length,this.styles,n);var o=new l(t+this.text.slice(e),n);if(i)for(var r=0;i.length>r;++r){var a=i[r],s=a.split(e,t.length);s&&(o.marked||(o.marked=[]),o.marked.push(s),s.attach(o))}return o},append:function(e){var t=this.text.length,n=e.marked,i=this.marked;if(this.text+=e.text,d(0,e.text.length,e.styles,this.styles),i)for(var o=0;i.length>o;++o)null==i[o].to&&(i[o].to=t);if(n&&n.length){i||(this.marked=i=[]);e:for(var o=0;n.length>o;++o){var r=n[o];if(!r.from)for(var a=0;i.length>a;++a){var s=i[a];if(s.to==t&&s.sameSet(r)){s.to=null==r.to?null:r.to+t,s.isDead()&&(s.detach(this),n.splice(o--,1));continue e}}i.push(r),r.attach(this),r.from+=t,null!=r.to&&(r.to+=t)}}},fixMarkEnds:function(e){var t=this.marked,n=e.marked;if(t)for(var i=0;t.length>i;++i){var o=t[i],r=null==o.to;if(r&&n)for(var a=0;n.length>a;++a)if(n[a].sameSet(o)){r=!1;break}r&&(o.to=this.text.length)}},fixMarkStarts:function(){var e=this.marked;if(e)for(var t=0;e.length>t;++t)null==e[t].from&&(e[t].from=0)},addMark:function(e){e.attach(this),null==this.marked&&(this.marked=[]),this.marked.push(e),this.marked.sort(function(e,t){return(e.from||0)-(t.from||0)})},highlight:function(e,t,n){var i,o=new r(this.text,n),a=this.styles,s=0,l=!1,d=a[0];for(""==this.text&&e.blankLine&&e.blankLine(t);!o.eol();){var c=e.token(o,t),u=this.text.slice(o.start,o.pos);if(o.start=o.pos,s&&a[s-1]==c?a[s-2]+=u:u&&(!l&&(a[s+1]!=c||s&&a[s-2]!=i)&&(l=!0),a[s++]=u,a[s++]=c,i=d,d=a[s]),o.pos>5e3){a[s++]=this.text.slice(o.pos),a[s++]=null;break}}return a.length!=s&&(a.length=s,l=!0),s&&a[s-2]!=i&&(l=!0),l||(5>a.length&&10>this.text.length?null:!1)},getTokenAt:function(e,t,n){for(var i=this.text,o=new r(i);n>o.pos&&!o.eol();){o.start=o.pos;var a=e.token(o,t)}return{start:o.start,end:o.pos,string:o.current(),className:a||null,state:t}},indentation:function(e){return x(this.text,null,e)},getHTML:function(e,t,n,i,o){function r(e,t){e&&(l&&j&&" "==e.charAt(0)&&(e=" "+e.slice(1)),l=!1,t?s.push('<span class="',t,'">',_(e).replace(/\t/g,i),"</span>"):s.push(_(e).replace(/\t/g,i)))}function a(){u&&(C+=1,E=u.length>C?u[C]:null)}var s=[],l=!0;n&&s.push(this.className?'<pre class="'+this.className+'">':"<pre>");var d=this.styles,c=this.text,u=this.marked;e==t&&(e=null);var m=c.length;if(null!=o&&(m=Math.min(o,m)),c||null!=o)if(u||null!=e){var h,f=0,p=0,g="",C=-1,E=null;for(a();m>f;){var v=m,b="";for(null!=e&&(e>f?v=e:(null==t||t>f)&&(b=" CodeMirror-selected",null!=t&&(v=Math.min(v,t))));E&&null!=E.to&&f>=E.to;)a();for(E&&(E.from>f?v=Math.min(v,E.from):(b+=" "+E.style,null!=E.to&&(v=Math.min(v,E.to))));;){var B=f+g.length,y=h;if(b&&(y=h?h+b:b),r(B>v?g.slice(0,v-f):g,y),B>=v){g=g.slice(v-f),f=v;break}f=B,g=d[p++],h="cm-"+d[p++]}}null!=e&&null==t&&r(" ","CodeMirror-selected")}else for(var p=0,D=0;m>D;p+=2){var A=d[p],h=d[p+1],F=A.length;D+F>m&&(A=A.slice(0,m-D)),D+=F,r(A,h&&"cm-"+h)}else r(" ",null!=e&&null==t?"CodeMirror-selected":null);return n&&s.push("</pre>"),s.join("")},cleanUp:function(){if(this.parent=null,this.marked)for(var e=0,t=this.marked.length;t>e;++e)this.marked[e].detach(this)}},c.prototype={chunkSize:function(){return this.lines.length},remove:function(e,t,n){for(var i=e,o=e+t;o>i;++i){var r=this.lines[i];if(this.height-=r.height,r.cleanUp(),r.handlers)for(var a=0;r.handlers.length>a;++a)n.push(r.handlers[a])}this.lines.splice(e,t)},collapse:function(e){e.splice.apply(e,[e.length,0].concat(this.lines))},insertHeight:function(e,t,n){this.height+=n,this.lines.splice.apply(this.lines,[e,0].concat(t));for(var i=0,o=t.length;o>i;++i)t[i].parent=this},iterN:function(e,t,n){for(var i=e+t;i>e;++e)if(n(this.lines[e]))return!0}},u.prototype={chunkSize:function(){return this.size},remove:function(e,t,n){this.size-=t;for(var i=0;this.children.length>i;++i){var o=this.children[i],r=o.chunkSize();if(r>e){var a=Math.min(t,r-e),s=o.height;if(o.remove(e,a,n),this.height-=s-o.height,r==a&&(this.children.splice(i--,1),o.parent=null),0==(t-=a))break;e=0}else e-=r}if(25>this.size-t){var l=[];this.collapse(l),this.children=[new c(l)]}},collapse:function(e){for(var t=0,n=this.children.length;n>t;++t)this.children[t].collapse(e)},insert:function(e,t){for(var n=0,i=0,o=t.length;o>i;++i)n+=t[i].height;this.insertHeight(e,t,n)},insertHeight:function(e,t,n){this.size+=t.length,this.height+=n;for(var i=0,o=this.children.length;o>i;++i){var r=this.children[i],a=r.chunkSize();if(a>=e){if(r.insertHeight(e,t,n),r.lines&&r.lines.length>50){for(;r.lines.length>50;){var s=r.lines.splice(r.lines.length-25,25),l=new c(s);r.height-=l.height,this.children.splice(i+1,0,l),l.parent=this}this.maybeSpill()}break}e-=a}},maybeSpill:function(){if(!(10>=this.children.length)){var e=this;do{var t=e.children.splice(e.children.length-5,5),n=new u(t);if(e.parent){e.size-=n.size,e.height-=n.height;var i=I(e.parent.children,e);e.parent.children.splice(i+1,0,n)}else{var o=new u(e.children);o.parent=e,e.children=[o,n],e=o}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iter:function(e,t,n){this.iterN(e,t-e,n)},iterN:function(e,t,n){for(var i=0,o=this.children.length;o>i;++i){var r=this.children[i],a=r.chunkSize();if(a>e){var s=Math.min(t,a-e);if(r.iterN(e,s,n))return!0;if(0==(t-=s))break;e=0}else e-=a}}},g.prototype={addChange:function(e,t,n){this.undone.length=0;var i=+new Date,o=this.done[this.done.length-1];if(i-this.time>400||!o||o.start>e+t||o.start+o.added<e-o.added+o.old.length)this.done.push({start:e,added:t,old:n});else{var r=0;if(o.start>e){for(var a=o.start-e-1;a>=0;--a)o.old.unshift(n[a]);o.added+=o.start-e,o.start=e}else e>o.start&&(r=e-o.start,t+=r);for(var a=o.added-r,s=n.length;s>a;++a)o.old.push(n[a]);t>o.added&&(o.added=t)}this.time=i}},e.e_stop=B,e.e_preventDefault=v,e.e_stopPropagation=b,e.connect=A,F.prototype={set:function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)}};var z=function(){if(/MSIE [1-8]\b/.test(navigator.userAgent))return!1;var e=document.createElement("div");return"draggable"in e}(),W=/gecko\/\d{7}/i.test(navigator.userAgent),j=/MSIE \d/.test(navigator.userAgent),V=/WebKit\//.test(navigator.userAgent),G="\n";(function(){var e=document.createElement("textarea");e.value="foo\nbar",e.value.indexOf("\r")>-1&&(G="\r\n")})(),null!=document.documentElement.getBoundingClientRect&&(S=function(e,t){try{var n=e.getBoundingClientRect();n={top:n.top,left:n.left}}catch(i){n={top:0,left:0}}if(!t)if(null==window.pageYOffset){var o=document.documentElement||document.body.parentNode;null==o.scrollTop&&(o=document.body),n.top+=o.scrollTop,n.left+=o.scrollLeft}else n.top+=window.pageYOffset,n.left+=window.pageXOffset;return n});var X=document.createElement("pre");"\na"==_("a")?_=function(e){return X.textContent=e,X.innerHTML.slice(1)}:"	"!=_("	")&&(_=function(e){return X.innerHTML="",X.appendChild(document.createTextNode(e)),X.innerHTML}),e.htmlEscape=_;var K=3!="\n\nb".split(/\n/).length?function(e){for(var t,n=0,i=[];(t=e.indexOf("\n",n))>-1;)i.push(e.slice(n,"\r"==e.charAt(t-1)?t-1:t)),n=t+1;return i.push(e.slice(n)),i}:function(e){return e.split(/\r?\n/)};e.splitLines=K;var Y=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(n){}return t&&t.parentElement()==e?0!=t.compareEndPoints("StartToEnd",t):!1};e.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),e.defineMIME("text/plain","null");var J={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};return e.keyNames=J,function(){for(var e=0;10>e;e++)J[e+48]=String(e);for(var e=65;90>=e;e++)J[e]=String.fromCharCode(e);for(var e=1;12>=e;e++)J[e+111]=J[e+63235]="F"+e}(),e}();CodeMirror.defineMode("xml",function(e,t){function n(e,t){function n(n){return t.tokenize=n,n(e,t)}var o=e.next();if("<"==o){if(e.eat("!"))return e.eat("[")?e.match("CDATA[")?n(r("atom","]]>")):null:e.match("--")?n(r("comment","-->")):e.match("DOCTYPE",!0,!0)?(e.eatWhile(/[\w\._\-]/),n(a(1))):null;if(e.eat("?"))return e.eatWhile(/[\w\._\-]/),t.tokenize=r("meta","?>"),"meta";E=e.eat("/")?"closeTag":"openTag",e.eatSpace(),C="";for(var s;s=e.eat(/[^\s\u00a0=<>\"\'\/?]/);)C+=s;return t.tokenize=i,"tag"}return"&"==o?(e.eatWhile(/[^;]/),e.eat(";"),"atom"):(e.eatWhile(/[^&<]/),null)}function i(e,t){var i=e.next();return">"==i||"/"==i&&e.eat(">")?(t.tokenize=n,E=">"==i?"endTag":"selfcloseTag","tag"):"="==i?(E="equals",null):/[\'\"]/.test(i)?(t.tokenize=o(i),t.tokenize(e,t)):(e.eatWhile(/[^\s\u00a0=<>\"\'\/?]/),"word")}function o(e){return function(t,n){for(;!t.eol();)if(t.next()==e){n.tokenize=i;break}return"string"}}function r(e,t){return function(i,o){for(;!i.eol();){if(i.match(t)){o.tokenize=n;break}i.next()}return e}}function a(e){return function(t,i){for(var o;null!=(o=t.next());){if("<"==o)return i.tokenize=a(e+1),i.tokenize(t,i);if(">"==o){if(1==e){i.tokenize=n;break}return i.tokenize=a(e-1),i.tokenize(t,i)}}return"meta"}}function s(){for(var e=arguments.length-1;e>=0;e--)v.cc.push(arguments[e])}function l(){return s.apply(null,arguments),!0}function d(e,t){var n=y.doNotIndent.hasOwnProperty(e)||v.context&&v.context.noIndent;v.context={prev:v.context,tagName:e,indent:v.indented,startOfLine:t,noIndent:n}}function c(){v.context&&(v.context=v.context.prev)}function u(e){if("openTag"==e)return v.tagName=C,l(f,m(v.startOfLine));if("closeTag"==e){var t=!1;return t=v.context?v.context.tagName!=C:!0,t&&(b="error"),l(h(t))}return l()}function m(e){return function(t){return"selfcloseTag"==t||"endTag"==t&&y.autoSelfClosers.hasOwnProperty(v.tagName.toLowerCase())?l():"endTag"==t?(d(v.tagName,e),l()):l()}}function h(e){return function(t){return e&&(b="error"),"endTag"==t?(c(),l()):(b="error",l(arguments.callee))}}function f(e){return"word"==e?(b="attribute",l(f)):"equals"==e?l(p,f):"string"==e?(b="error",l(f)):s()}function p(e){return"word"==e&&y.allowUnquoted?(b="string",l()):"string"==e?l(g):s()}function g(e){return"string"==e?l(g):s()}var C,E,v,b,B=e.indentUnit,y=t.htmlMode?{autoSelfClosers:{br:!0,img:!0,hr:!0,link:!0,input:!0,meta:!0,col:!0,frame:!0,base:!0,area:!0},doNotIndent:{pre:!0},allowUnquoted:!0}:{autoSelfClosers:{},doNotIndent:{},allowUnquoted:!1},D=t.alignCDATA;return{startState:function(){return{tokenize:n,cc:[],indented:0,startOfLine:!0,tagName:null,context:null}},token:function(e,t){if(e.sol()&&(t.startOfLine=!0,t.indented=e.indentation()),e.eatSpace())return null;b=E=C=null;var n=t.tokenize(e,t);if(t.type=E,(n||E)&&"comment"!=n)for(v=t;;){var i=t.cc.pop()||u;if(i(E||n))break}return t.startOfLine=!1,b||n},indent:function(e,t,o){var r=e.context;if(e.tokenize!=i&&e.tokenize!=n||r&&r.noIndent)return o?o.match(/^(\s*)/)[0].length:0;if(D&&/<!\[CDATA\[/.test(t))return 0;for(r&&/^<\//.test(t)&&(r=r.prev);r&&!r.startOfLine;)r=r.prev;return r?r.indent+B:0},compareStates:function(e,t){if(e.indented!=t.indented||e.tokenize!=t.tokenize)return!1;for(var n=e.context,i=t.context;;n=n.prev,i=i.prev){if(!n||!i)return n==i;if(n.tagName!=i.tagName)return!1}},electricChars:"/"}}),CodeMirror.defineMIME("application/xml","xml"),CodeMirror.defineMIME("text/html",{name:"xml",htmlMode:!0}),CodeMirror.defineMode("javascript",function(e,t){function n(e,t,n){return t.tokenize=n,n(e,t)}function i(e,t){for(var n,i=!1;null!=(n=e.next());){if(n==t&&!i)return!1;i=!i&&"\\"==n}return i}function o(e,t,n){return R=e,M=n,t}function r(e,t){var r=e.next();if('"'==r||"'"==r)return n(e,t,a(r));if(/[\[\]{}\(\),;\:\.]/.test(r))return o(r);if("0"==r&&e.eat(/x/i))return e.eatWhile(/[\da-f]/i),o("number","number");if(/\d/.test(r))return e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),o("number","number");if("/"==r)return e.eat("*")?n(e,t,s):e.eat("/")?(e.skipToEnd(),o("comment","comment")):t.reAllowed?(i(e,"/"),e.eatWhile(/[gimy]/),o("regexp","string")):(e.eatWhile($),o("operator",null,e.current()));if("#"==r)return e.skipToEnd(),o("error","error");if($.test(r))return e.eatWhile($),o("operator",null,e.current());e.eatWhile(/[\w\$_]/);var l=e.current(),d=O.propertyIsEnumerable(l)&&O[l];return d&&t.kwAllowed?o(d.type,d.style,l):o("variable","variable",l)}function a(e){return function(t,n){return i(t,e)||(n.tokenize=r),o("string","string")}}function s(e,t){for(var n,i=!1;n=e.next();){if("/"==n&&i){t.tokenize=r;break}i="*"==n}return o("comment","comment")}function l(e,t,n,i,o,r){this.indented=e,this.column=t,this.type=n,this.prev=o,this.info=r,null!=i&&(this.align=i)}function d(e,t){for(var n=e.localVars;n;n=n.next)if(n.name==t)return!0}function c(e,t,n,i,o){var r=e.cc;for(z.state=e,z.stream=o,z.marked=null,z.cc=r,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;){var a=r.length?r.pop():P?b:v;if(a(n,i)){for(;r.length&&r[r.length-1].lex;)r.pop()();return z.marked?z.marked:"variable"==n&&d(e,i)?"variable-2":t}}}function u(){for(var e=arguments.length-1;e>=0;e--)z.cc.push(arguments[e])}function m(){return u.apply(null,arguments),!0}function h(e){var t=z.state;if(t.context){z.marked="def";for(var n=t.localVars;n;n=n.next)if(n.name==e)return;t.localVars={name:e,next:t.localVars}}}function f(){z.state.context||(z.state.localVars=W),z.state.context={prev:z.state.context,vars:z.state.localVars}}function p(){z.state.localVars=z.state.context.vars,z.state.context=z.state.context.prev}function g(e,t){var n=function(){var n=z.state;n.lexical=new l(n.indented,z.stream.column(),e,null,n.lexical,t)};return n.lex=!0,n}function C(){var e=z.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function E(e){return function(t){return t==e?m():";"==e?u():m(arguments.callee)}}function v(e){return"var"==e?m(g("vardef"),S,E(";"),C):"keyword a"==e?m(g("form"),b,v,C):"keyword b"==e?m(g("form"),v,C):"{"==e?m(g("}"),w,C):";"==e?m():"function"==e?m(L):"for"==e?m(g("form"),E("("),g(")"),T,E(")"),C,v,C):"variable"==e?m(g("stat"),D):"switch"==e?m(g("form"),b,g("}","switch"),E("{"),w,C,C):"case"==e?m(b,E(":")):"default"==e?m(E(":")):"catch"==e?m(g("form"),f,E("("),I,E(")"),v,C,p):u(g("stat"),b,E(";"),C)}function b(e){return q.hasOwnProperty(e)?m(y):"function"==e?m(L):"keyword c"==e?m(B):"("==e?m(g(")"),b,E(")"),C,y):"operator"==e?m(b):"["==e?m(g("]"),x(b,"]"),C,y):"{"==e?m(g("}"),x(F,"}"),C,y):m()}function B(e){return e.match(/[;\}\)\],]/)?u():u(b)}function y(e,t){if("operator"==e&&/\+\+|--/.test(t))return m(y);if("operator"==e)return m(b);if(";"!=e)return"("==e?m(g(")"),x(b,")"),C,y):"."==e?m(A,y):"["==e?m(g("]"),b,E("]"),C,y):void 0}function D(e){return":"==e?m(C,v):u(y,E(";"),C)}function A(e){return"variable"==e?(z.marked="property",m()):void 0}function F(e){return"variable"==e&&(z.marked="property"),q.hasOwnProperty(e)?m(E(":"),b):void 0}function x(e,t){function n(i){return","==i?m(e,n):i==t?m():m(E(t))}return function(i){return i==t?m():u(e,n)}}function w(e){return"}"==e?m():u(v,w)}function S(e,t){return"variable"==e?(h(t),m(N)):m()}function N(e,t){return"="==t?m(b,N):","==e?m(S):void 0}function T(e){return"var"==e?m(S,k):";"==e?u(k):"variable"==e?m(U):u(k)}function U(e,t){return"in"==t?m(b):m(y,k)}function k(e,t){return";"==e?m(_):"in"==t?m(b):m(b,E(";"),_)}function _(e){")"!=e&&m(b)}function L(e,t){return"variable"==e?(h(t),m(L)):"("==e?m(g(")"),f,x(I,")"),C,v,p):void 0}function I(e,t){return"variable"==e?(h(t),m()):void 0}var R,M,H=e.indentUnit,P=t.json,O=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),n=e("keyword b"),i=e("keyword c"),o=e("operator"),r={type:"atom",style:"atom"};return{"if":t,"while":t,"with":t,"else":n,"do":n,"try":n,"finally":n,"return":i,"break":i,"continue":i,"new":i,"delete":i,"throw":i,"var":e("var"),"const":e("var"),let:e("var"),"function":e("function"),"catch":e("catch"),"for":e("for"),"switch":e("switch"),"case":e("case"),"default":e("default"),"in":o,"typeof":o,"instanceof":o,"true":r,"false":r,"null":r,undefined:r,NaN:r,Infinity:r}}(),$=/[+\-*&%=<>!?|]/,q={atom:!0,number:!0,variable:!0,string:!0,regexp:!0},z={state:null,column:null,marked:null,cc:null},W={name:"this",next:{name:"arguments"}};return C.lex=!0,{startState:function(e){return{tokenize:r,reAllowed:!0,kwAllowed:!0,cc:[],lexical:new l((e||0)-H,0,"block",!1),localVars:null,context:null,indented:0}},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation()),e.eatSpace())return null;var n=t.tokenize(e,t);return"comment"==R?n:(t.reAllowed="operator"==R||"keyword c"==R||R.match(/^[\[{}\(,;:]$/),t.kwAllowed="."!=R,c(t,n,R,M,e))},indent:function(e,t){if(e.tokenize!=r)return 0;var n=t&&t.charAt(0),i=e.lexical,o=i.type,a=n==o;return"vardef"==o?i.indented+4:"form"==o&&"{"==n?i.indented:"stat"==o||"form"==o?i.indented+H:"switch"!=i.info||a?i.align?i.column+(a?0:1):i.indented+(a?0:H):i.indented+(/^(?:case|default)\b/.test(t)?H:2*H)},electricChars:":{}"}}),CodeMirror.defineMIME("text/javascript","javascript"),CodeMirror.defineMIME("application/json",{name:"javascript",json:!0}),CodeMirror.defineMode("css",function(e){function t(e,t){return a=t,e}function n(e,n){var a=e.next();return"@"==a?(e.eatWhile(/[\w\\\-]/),t("meta",e.current())):"/"==a&&e.eat("*")?(n.tokenize=i,i(e,n)):"<"==a&&e.eat("!")?(n.tokenize=o,o(e,n)):"="!=a?"~"!=a&&"|"!=a||!e.eat("=")?'"'==a||"'"==a?(n.tokenize=r(a),n.tokenize(e,n)):"#"==a?(e.eatWhile(/[\w\\\-]/),t("atom","hash")):"!"==a?(e.match(/^\s*\w*/),t("keyword","important")):/\d/.test(a)?(e.eatWhile(/[\w.%]/),t("number","unit")):/[,.+>*\/]/.test(a)?t(null,"select-op"):/[;{}:\[\]]/.test(a)?t(null,a):(e.eatWhile(/[\w\\\-]/),t("variable","variable")):t(null,"compare"):(t(null,"compare"),void 0)}function i(e,i){for(var o,r=!1;null!=(o=e.next());){if(r&&"/"==o){i.tokenize=n;break}r="*"==o}return t("comment","comment")}function o(e,i){for(var o,r=0;null!=(o=e.next());){if(r>=2&&">"==o){i.tokenize=n;break}r="-"==o?r+1:0}return t("comment","comment")}function r(e){return function(i,o){for(var r,a=!1;null!=(r=i.next())&&(r!=e||a);)a=!a&&"\\"==r;return a||(o.tokenize=n),t("string","string")}}var a,s=e.indentUnit;return{startState:function(e){return{tokenize:n,baseIndent:e||0,stack:[]}},token:function(e,t){if(e.eatSpace())return null;var n=t.tokenize(e,t),i=t.stack[t.stack.length-1];return"hash"==a&&"rule"==i?n="atom":"variable"==n&&("rule"==i?n="number":i&&"@media{"!=i||(n="tag")),"rule"==i&&/^[\{\};]$/.test(a)&&t.stack.pop(),"{"==a?"@media"==i?t.stack[t.stack.length-1]="@media{":t.stack.push("{"):"}"==a?t.stack.pop():"@media"==a?t.stack.push("@media"):"{"==i&&"comment"!=a&&t.stack.push("rule"),n},indent:function(e,t){var n=e.stack.length;return/^\}/.test(t)&&(n-="rule"==e.stack[e.stack.length-1]?2:1),e.baseIndent+n*s},electricChars:"}"}}),CodeMirror.defineMIME("text/css","css"),CodeMirror.defineMode("htmlmixed",function(e){function t(e,t){var n=r.token(e,t.htmlState);return"tag"==n&&">"==e.current()&&t.htmlState.context&&(/^script$/i.test(t.htmlState.context.tagName)?(t.token=i,t.localState=a.startState(r.indent(t.htmlState,"")),t.mode="javascript"):/^style$/i.test(t.htmlState.context.tagName)&&(t.token=o,t.localState=s.startState(r.indent(t.htmlState,"")),t.mode="css")),n}function n(e,t,n){var i=e.current(),o=i.search(t);return o>-1&&e.backUp(i.length-o),n}function i(e,i){return e.match(/^<\/\s*script\s*>/i,!1)?(i.token=t,i.curState=null,i.mode="html",t(e,i)):n(e,/<\/\s*script\s*>/,a.token(e,i.localState))}function o(e,i){return e.match(/^<\/\s*style\s*>/i,!1)?(i.token=t,i.localState=null,i.mode="html",t(e,i)):n(e,/<\/\s*style\s*>/,s.token(e,i.localState))}var r=CodeMirror.getMode(e,{name:"xml",htmlMode:!0}),a=CodeMirror.getMode(e,"javascript"),s=CodeMirror.getMode(e,"css");return{startState:function(){var e=r.startState();return{token:t,localState:null,mode:"html",htmlState:e}},copyState:function(e){if(e.localState)var t=CodeMirror.copyState(e.token==o?s:a,e.localState);return{token:e.token,localState:t,mode:e.mode,htmlState:CodeMirror.copyState(r,e.htmlState)}},token:function(e,t){return t.token(e,t)},indent:function(e,n){return e.token==t||/^\s*<\//.test(n)?r.indent(e.htmlState,n):e.token==i?a.indent(e.localState,n):s.indent(e.localState,n)},compareStates:function(e,t){return r.compareStates(e.htmlState,t.htmlState)},electricChars:"/{}:"}}),CodeMirror.defineMIME("text/html","htmlmixed");